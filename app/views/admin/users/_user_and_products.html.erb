<%= load_pack("admin_review") %>

<div class="paragraphs">
  <div class="tab-pills" role="tablist" aria-label="User Tabs">
    <button
      type="button"
      class="pill"
      role="tab"
      aria-selected="true"
      onclick="document.getElementById('profile-tab').classList.remove('hidden');document.getElementById('products-tab').classList.add('hidden');this.setAttribute('aria-selected','true');this.nextElementSibling.setAttribute('aria-selected','false');"
    >
      Profile
    </button>
    <button
      type="button"
      role="tab"
      aria-selected="false"
      onclick="document.getElementById('profile-tab').classList.add('hidden');document.getElementById('products-tab').classList.remove('hidden');this.setAttribute('aria-selected','true');this.previousElementSibling.setAttribute('aria-selected','false');"
    >
      Products
    </button>
  </div>

  <div id="profile-tab" class="block">
    <%= render("admin/users/user", user: user, is_affiliate_user: is_affiliate_user) %>
  </div>

  <div id="products-tab" class="hidden">
    <% if products.none? %>
      <div class="info" role="status"><%= is_affiliate_user ? "No affiliated products." : "No products created." %></div>
    <% else %>
      <% products.each do |product| %>
        <%= render("admin/links/product", product: product, show_purchases: true, is_affiliate_user: is_affiliate_user, user_id: user.id) %>
      <% end %>
      <% if pagy.pages > 1 %>
        <div class="pagination" role="navigation" aria-label="Pagination">
          <%= link_to("‹ Previous", pagy_url_for(pagy, pagy.prev), class: "button", inert: !pagy.prev) %>
          <menu>
            <% (1..pagy.pages).map do |page| %>
              <li><%= link_to(page, pagy_url_for(pagy, page), class: "button", inert: page == pagy.page) %></li>
            <% end %>
          </menu>
          <%= link_to("Next ›", pagy_url_for(pagy, pagy.next), class: "button", inert: !pagy.next) %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
